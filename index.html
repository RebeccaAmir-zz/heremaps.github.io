<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>HERE Maps on GitHub</title>
		<meta name="description" content="Landing page for HERE Maps on Github">
		<meta name="viewport" content="width=device-width">
		<link rel="stylesheet" href="./css/style.css">
		<script src="lib/jquery.js" ></script>
		<script src="lib/moment.js" ></script>

		<link rel="icon" type="image/x-icon" href="img/favicon.ico">

	</head>
	<body class="here">
		<header class="panel">
			<div class="content-wrapper">
				<nav id="service_switcher">
					<ul>
						<li>
							<a class="logo" href="https://here.com" title="Go to HERE.com to find out more about the company"></a>
						</li>
					</ul>
				</nav>
				<div class="header-descr">
					<h1 class="title">HERE Maps on GitHub</h1>
					<p class="intro">The leading location cloud.</p>
					<div>
							<a href="https://github.com/heremaps" class="dp-button dp-button-transparent" target="_blank">BROWSE ON GITHUB</a>
							<a href="https://developer.here.com/applications/create/sign-in?planId=10134071&amp;subplanId=10134072&amp;keepState=true#&amp;cid=github-rs-eval_signup" class="dp-button dp-button-primary " target="_blank">START CODING</a>
					</div>
				</div>
			</div>
		</header>

		<div class="content-wrapper">
			<div id="repo-section">
				<section class="teaser light">
					<div class="spacer-top">&nbsp;</div>
					<h1>More Info</h1>
					<p>Explore our code examples and documentation</p>
					<div class="spacer-middle">&nbsp;</div>
					<a href="https://developer.here.com" class="dp-button dp-button-primary" target="_blank">See All</a>
					<div class="spacer-bottom">&nbsp;</div>
				</section>

				<section class="teaser light">
					<div class="spacer-top">&nbsp;</div>
					<h1>News</h1>
					<p>Interested in the latest<br/> developer news?</p>
					<div class="spacer-middle">&nbsp;</div>
					<a href="https://developer.here.com/news" class="dp-button dp-button-primary" target="_blank">Follow us</a>
					<div class="spacer-bottom">&nbsp;</div>
				</section>
			</div>
		</div>

		<footer>
				<span class="imprint">
						<span class="copyright_string label_block">&copy; 2016	HERE</span> |
						<a target="_blank" href="https://legal.here.com/en/terms/serviceterms/us/" class="label_block">Terms</a> |
						<a target="_blank" href="https://legal.here.com/en/privacy/policy/us/" class="label_block">Privacy &amp;
								Cookies</a>
				</span>
		</footer>

		<!-- Template note to be re-used when creating section panels -->
		<script type="text/x-template" id="repo-section-template">
			<section class="teaser dark" id="repo-info-{repo-id}">
				<h5 data-key="repo-type">{repo-type}</h5>
				<h2 data-key="repo-id"><a href="https://www.github.com/heremaps/{repo-id}" target="_blank" title="{repo-descr}">{repo-id}</a></h2>
				<p class="repo-descr">{repo-descr}</p>
				<div class="bottom">
					<p class="alignleft">Update on <span data-role="repo-lastUpdate">-</span></p>
					<p class="alignright" data-role="repo-stats">
						<a href="https://www.github.com/heremaps/{repo-id}/network" target="_blank" class="link" title="Click here to see this project's forks"><img width="11px" height="14px" src="img/fork.png"><span data-role="fork-count"></span></a>&nbsp;
						<a href="https://www.github.com/heremaps/{repo-id}/stargazers" target="_blank" class="link" title="Click here to see this project's stars"><img width="15px" height="14px" src="img/star.png"><span data-role="star-count"></span></a>
					</p>
					<div class="clear"></div>
				</div>
			</section>
		</script>
		<!-- Template node ends here -->

		<script type="text/javascript">
			var repos = [
					{id: 'here-android-sdk-examples',
					type: 'Java',
					description:'Java-based projects using the HERE SDK for Android'},
					{id: 'here-ios-sdk-examples',
					type: 'Objective-C',
					description:'Objective-C-based projects using the HERE SDK for iOS'},
					{id: 'bike-navigation',
					type: 'Eagle',
					description:'A companion device that connects to the HERE app on Android, including an open-source toolkit to build a custom bike navigation device.'},
					{id: 'map-linkbuilder-app',
					type: 'JavaScript',
					description:'A reference web application that showcases deeplinking to here.com.'},
					{id: 'postman-collections',
					type: 'REST',
					description:'A series of Postman collections that demonstrate a variety of use cases for all HERE REST and Platform Extension APIs.'},
					{id: 'maps-api-for-javascript-examples',
					type: 'JavaScript',
					description:'A series of JavaScript-based examples that use the HERE Maps API for JavaScript.'},
					{id: 'jsfiddle-github',
					type: 'JavaScript',
					description:'A series of JavaScript-based examples that use the HERE Maps API for JavaScript for integration with JSFiddle.'},
					{id: 'examples',
					type: 'JavaScript',
					description:'Self-contained examples for the legacy Maps API for JavaScript.'},
					{id: 'dita-ot-plugins',
					type: 'XSLT',
					description:'A set of DITA Open Toolkit plugins developed internally at HERE.'},
					{id: 'developer-blog',
					type: 'Misc.',
					description:'A set of examples and projects featured on the HERE developer blog.'},
					{id: 'data-lens-javascript-examples',
					type: 'JavaScript',
					description:'A series of JavaScript-based code examples that use the HERE Data Lens JavaScript API.'},
					{id: 'here-aaa-java-sdk',
					type: 'Java',
					description:'The complete source code for the HERE Authentication, Authorization, and Accounting Java SDK.'}
				],
				repoSectionTemplate = $('#repo-section-template').text(),
				sections = [];

			repos.forEach(function (repo, index) {
				// Replace placeholders with relevant data
				var sectionTemplateStr = repoSectionTemplate.replace(/\{repo-id\}/gi, repo.id)
																										.replace(/\{repo-type\}/gi, repo.type)
																										.replace(/\{repo-descr\}/gi, repo.description);
				// Create a document fragment out of the template text and push it on the sections array
				sections.push($(sectionTemplateStr));
			});
			
			// Append all sections to the DOM at once
			$('#repo-section').append(sections);
			
			// Fire a single HTTP request to the GitHub API to fetch stats
			$.getJSON('https://api.github.com/orgs/heremaps/repos')
			.done(function (repo_data) {
				repo_data.forEach(function (data, index) {
					var $target = $('#repo-info-' + data.name);
					if ($target.length > 0) {
						$target.find('[data-role="repo-lastUpdate"]').text(moment(data.updated_at).format('ll'));
						$target.find('[data-role="fork-count"]').text(data.forks_count);
						$target.find('[data-role="star-count"]').text(data.stargazers_count);
					}
				});
			})
			.fail(function () {
				console.log(arguments, "Error fetching repository information from the GitHub API!");
			});
		</script>
	</body>
</html>
